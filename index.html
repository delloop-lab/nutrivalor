<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nutrime - Food Tracking Web App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./src/styles/main.css">
    <link rel="icon" type="image/png" href="./src/assets/nutrime.png">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>Loading Nutrime...</p>
    </div>

    <!-- Authentication Section -->
    <div id="authSection" class="auth-section" style="display: none;">
        <div class="auth-container">
            <img src="./src/assets/nutrime.png" alt="Nutrime" class="auth-logo">
            <h1>Welcome to Nutrime</h1>
            <p>Your personal food tracking companion</p>
            
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="showAuthTab('login')">Login</button>
                <button class="auth-tab" onclick="showAuthTab('signup')">Sign Up</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <form onsubmit="handleLogin(event)">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="Password" required>
                    <button type="submit" class="auth-btn">Login</button>
                </form>
                <p class="auth-link">
                    <a href="#" onclick="showForgotPassword()">Forgot Password?</a>
                </p>
            </div>

            <!-- Sign Up Form -->
            <div id="signupForm" class="auth-form" style="display: none;">
                <form onsubmit="handleSignup(event)">
                    <input type="text" id="signupName" placeholder="Full Name" required>
                    <input type="email" id="signupEmail" placeholder="Email" required>
                    <input type="password" id="signupPassword" placeholder="Password" required>
                    <button type="submit" class="auth-btn">Sign Up</button>
                </form>
            </div>

            <!-- Forgot Password Form -->
            <div id="forgotForm" class="auth-form" style="display: none;">
                <form onsubmit="handleForgotPassword(event)">
                    <input type="email" id="forgotEmail" placeholder="Email" required>
                    <button type="submit" class="auth-btn">Reset Password</button>
                </form>
                <p class="auth-link">
                    <a href="#" onclick="showAuthTab('login')">Back to Login</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <img src="./src/assets/nutrime.png" alt="Nutrime" class="header-logo">
                <h1>Nutrime</h1>
                <div class="header-actions">
                    <span id="userEmail" class="user-info"></span>
                    <button onclick="handleLogout()" class="logout-btn">Logout</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-menu">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showSection('food-tracker')" data-section="food-tracker">
                    <span class="tab-icon">üçΩÔ∏è</span>
                    Food Tracker
                </button>
                <button class="nav-tab" onclick="showSection('meals')" data-section="meals">
                    <span class="tab-icon">ü•ó</span>
                    Meals
                </button>
                <button class="nav-tab" onclick="showSection('shopping-list')" data-section="shopping-list">
                    <span class="tab-icon">üõí</span>
                    Shopping List
                </button>
                <button class="nav-tab" onclick="showSection('meal-plan')" data-section="meal-plan">
                    <span class="tab-icon">üìÖ</span>
                    Meal Plan
                </button>
                <button class="nav-tab" onclick="showSection('analytics')" data-section="analytics">
                    <span class="tab-icon">üìä</span>
                    Analytics
                </button>
                <button class="nav-tab" onclick="showSection('settings')" data-section="settings">
                    <span class="tab-icon">‚öôÔ∏è</span>
                    Settings
                </button>
            </div>
        </nav>

        <!-- Main Container -->
        <div class="container">
            <!-- Food Tracker Section -->
            <section id="food-tracker" class="content-section active">
                <div class="section-header">
                    <h2>Food Tracker</h2>
                    <button onclick="showUploadModal()" class="primary-btn">Upload Food Data</button>
                </div>

                <!-- Category Filters -->
                <div class="category-filters">
                    <button class="filter-btn active" onclick="filterByCategory('all')">All</button>
                </div>

                <!-- Food Grid -->
                <div id="foodGrid" class="food-grid">
                    <p class="empty-state">Upload your food data to get started!</p>
                </div>
            </section>

            <!-- Meals Section -->
            <section id="meals" class="content-section">
                <div class="section-header">
                    <h2>Meals</h2>
                    <button onclick="showMealUploadModal()" class="primary-btn">Upload Meal Data</button>
                </div>

                <!-- Meal Filters -->
                <div class="meal-filters">
                    <button class="filter-btn active" onclick="filterMealsByCategory('all')">All Meals</button>
                </div>

                <!-- Meal Grid -->
                <div id="mealGrid" class="meal-grid">
                    <p class="empty-state">Upload your meal data to see available meals!</p>
                </div>
            </section>

            <!-- Shopping List Section -->
            <section id="shopping-list" class="content-section">
                <div class="section-header">
                    <h2>Shopping List</h2>
                    <button onclick="clearShoppingList()" class="secondary-btn">Clear List</button>
                </div>

                <div id="shoppingItems" class="shopping-items">
                    <p class="empty-state">Your shopping list is empty. Add items from the Food Tracker!</p>
                </div>

                <div id="shoppingTotals" class="shopping-totals" style="display: none;"></div>
            </section>

            <!-- Meal Plan Section -->
            <section id="meal-plan" class="content-section">
                <div class="section-header">
                    <h2>Meal Plan</h2>
                    <button onclick="generateMealPlan()" class="primary-btn">Generate Plan</button>
                </div>

                <div id="mealPlanGrid" class="meal-plan-grid">
                    <p class="empty-state">Create your meal plan here!</p>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="content-section">
                <div class="section-header">
                    <h2>Nutrition Analytics</h2>
                </div>

                <div class="analytics-grid">
                    <div class="chart-container">
                        <canvas id="nutritionChart"></canvas>
                    </div>
                    <div class="stats-container">
                        <div class="stat-card">
                            <h3>Total Carbs</h3>
                            <span id="totalCarbs">0g</span>
                        </div>
                        <div class="stat-card">
                            <h3>Total Fat</h3>
                            <span id="totalFat">0g</span>
                        </div>
                        <div class="stat-card">
                            <h3>Total Protein</h3>
                            <span id="totalProtein">0g</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <div class="section-header">
                    <h2>Settings</h2>
                </div>

                <div class="settings-grid">
                    <div class="setting-group">
                        <h3>Profile</h3>
                        <input type="text" id="profileName" placeholder="Your Name">
                        <button onclick="updateProfile()" class="primary-btn">Update Profile</button>
                    </div>

                    <div class="setting-group">
                        <h3>Data Management</h3>
                        <button onclick="exportData()" class="secondary-btn">Export Data</button>
                        <button onclick="clearAllData()" class="danger-btn">Clear All Data</button>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload Food Data</h3>
                <button onclick="closeUploadModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-area">
                    <input type="file" id="foodFileInput" accept=".xlsx,.xls" style="display: none;">
                    <button onclick="document.getElementById('foodFileInput').click()" class="upload-btn">
                        Choose Excel File
                    </button>
                    <p class="upload-hint">Upload your food database Excel file</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Meal Upload Modal -->
    <div id="mealUploadModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload Meal Data</h3>
                <button onclick="closeMealUploadModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-area">
                    <input type="file" id="mealFileInput" accept=".xlsx,.xls" style="display: none;">
                    <button onclick="document.getElementById('mealFileInput').click()" class="upload-btn">
                        Choose Excel File
                    </button>
                    <p class="upload-hint">Upload your meal database Excel file</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Toast -->
    <div id="messageToast" class="message-toast" style="display: none;"></div>

    <!-- Scripts -->
    <script src="./src/js/supabase-client.js"></script>
    <script src="./src/js/auth.js"></script>
    <script src="./src/js/database.js"></script>
    <script src="./src/js/food-tracker.js"></script>
    <script src="./src/js/meals.js"></script>
    <script src="./src/js/analytics.js"></script>
    <script src="./src/js/main.js"></script>
</body>
</html> 